<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Propuesta Doctoral: Modelo Administrativo Híbrido de Resiliencia Organizacional</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Neutrals -->
    <!-- Application Structure Plan: Se ha rediseñado la aplicación para funcionar como una presentación paginada. Cada sección es una 'página' que se muestra u oculta, controlada por botones de 'Siguiente/Anterior' y la barra de navegación. Esta estructura es ideal para presentaciones guiadas, permitiendo al expositor controlar el flujo de información y enfocar la atención de la audiencia en un tema a la vez. Se mantiene la barra de navegación superior para acceso directo a cualquier sección. Esta estructura convierte la propuesta en una herramienta de presentación activa. -->
    <!-- Visualization & Content Choices: 1. Perfil de Autor (Nuevo): Se agregó una sección de perfil con foto y biografía en la página de inicio. Objetivo: Informar/Introducir. Método: Layout de dos columnas HTML/CSS. Interacción: Estática. Justificación: Personaliza la propuesta y establece la autoridad del autor desde el principio. 2. Diagrama de Riesgo Compuesto (Revisado): La lista de texto se reemplazó con un diagrama visual creado con HTML/Tailwind. Objetivo: Informar. Método: Diagrama en HTML/CSS. Interacción: Visualización directa. Justificación: Es más efectivo y rápido para comunicar la convergencia de amenazas que el texto plano. 3. Tabla de Equivalencias (Sin cambios): Se mantiene la tabla interactiva con filtro en su página correspondiente, ya que es un elemento de exploración clave. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fa;
            color: #212529;
        }
        .nav-link {
            transition: all 0.3s ease;
            position: relative;
            cursor: pointer;
        }
        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -4px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #0d6efd;
            transition: width 0.3s ease;
        }
        .nav-link.active::after,
        .nav-link:hover::after {
            width: 100%;
        }
        .section-card {
            background-color: #ffffff;
            border: 1px solid #dee2e6;
            border-radius: 0.75rem;
            padding: 2.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.05), 0 2px 4px -2px rgb(0 0 0 / 0.05);
        }
        .page {
            display: none;
            animation: fadeIn 0.6s ease-in-out;
        }
        .page.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .nav-button {
            transition: all 0.2s ease-in-out;
        }
        .nav-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        .resource-item {
            cursor: grab;
            user-select: none;
        }
        .resource-item:active {
            cursor: grabbing;
        }
        #canvas-container {
            touch-action: none; /* Prevents default touch actions like scrolling on the canvas */
        }
        .tool-btn.active-tool {
            background-color: #dbeafe; /* blue-100 */
            border-color: #3b82f6; /* blue-500 */
            border-width: 2px;
            color: #1e40af; /* blue-800 */
        }

    </style>
</head>
<body class="antialiased">

    <!-- Header & Navigation -->
    <header class="bg-white/90 backdrop-blur-lg shadow-sm sticky top-0 z-50 border-b border-gray-200">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="text-xl font-bold text-blue-800">
                Propuesta Doctoral
            </div>
            <div class="hidden md:flex flex-wrap items-center text-sm lg:text-base" id="desktop-nav">
                <a data-page="inicio" class="nav-link active px-3 py-2">Inicio</a>
                <a data-page="problema" class="nav-link px-3 py-2">Problema</a>
                <a data-page="propuesta" class="nav-link px-3 py-2">Propuesta</a>
                <a data-page="modelo" class="nav-link px-3 py-2">Modelo Híbrido</a>
                <a data-page="analisis" class="nav-link px-3 py-2">Análisis de Roles</a>
                <a data-page="tablero" class="nav-link px-3 py-2">Tablero Táctico</a>
                <a data-page="marco" class="nav-link px-3 py-2">Marco Teórico</a>
                <a data-page="bibliografia" class="nav-link px-3 py-2">Bibliografía</a>
            </div>
            <div class="md:hidden">
                <select id="mobile-nav" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">
                    <option value="inicio">Inicio</option>
                    <option value="problema">Problema</option>
                    <option value="propuesta">Propuesta</option>
                    <option value="modelo">Modelo Híbrido</option>
                    <option value="analisis">Análisis de Roles</option>
                    <option value="tablero">Tablero Táctico</option>
                    <option value="marco">Marco Teórico</option>
                    <option value="bibliografia">Bibliografía</option>
                </select>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-6 py-16">

        <!-- Page: Inicio -->
        <section id="inicio" class="page active">
            <div class="text-center mb-16">
                <h1 class="text-4xl md:text-5xl font-bold text-blue-900 leading-tight mb-4">
                    Modelo Administrativo Híbrido de Resiliencia Organizacional (MAHRO)
                </h1>
                <p class="text-lg md:text-xl text-gray-600 max-w-4xl mx-auto">
                    Articulando la Respuesta Táctica y la Continuidad del Negocio en el Entorno de Riesgo Compuesto del Pacífico Colombiano.
                </p>
            </div>

            <div class="section-card max-w-6xl mx-auto">
                <div class="grid md:grid-cols-3 gap-12 items-center">
                    <div class="md:col-span-1 flex justify-center">
                        <img src="https://raw.githubusercontent.com/instructorandradedcc/PROPUESTA-MAHRO/main/olmer.jpg" alt="Foto de Olmer Geovanny Andrade Cardenas" class="w-48 h-64 rounded-lg object-cover shadow-lg">
                    </div>
                    <div class="md:col-span-2">
                        <h2 class="text-3xl font-bold text-blue-800">Olmer Geovanny Andrade Cardenas</h2>
                        <p class="text-lg text-gray-500 mb-6">Aspirante Doctoral</p>
                        <ul class="space-y-3 text-gray-700">
                            <li class="flex items-start"><span class="w-2 h-2 bg-blue-500 rounded-full mr-3 mt-2 flex-shrink-0"></span>Ingeniero Industrial y Administrador de Empresas</li>
                            <li class="flex items-start"><span class="w-2 h-2 bg-blue-500 rounded-full mr-3 mt-2 flex-shrink-0"></span>Maestrante en Gerencia de Proyectos y Procesos</li>
                            <li class="flex items-start"><span class="w-2 h-2 bg-blue-500 rounded-full mr-3 mt-2 flex-shrink-0"></span>Tecnólogo en Gobierno Local</li>
                            <li class="flex items-start"><span class="w-2 h-2 bg-blue-500 rounded-full mr-3 mt-2 flex-shrink-0"></span>Técnico en Búsqueda y Rescate, Gestión de Riesgos y Emergencias, y Gestión Ambiental.</li>
                            <li class="flex items-start"><span class="w-2 h-2 bg-blue-500 rounded-full mr-3 mt-2 flex-shrink-0"></span>Voluntario e Instructor (CRECL, SCI) en la Defensa Civil Colombiana.</li>
                            <li class="flex items-start"><span class="w-2 h-2 bg-blue-500 rounded-full mr-3 mt-2 flex-shrink-0"></span>Desarrollador de Prótesis Biónicas y Realidad Aumentada</li>
                        </ul>
                        <div class="mt-8 pt-6 border-t border-gray-200 text-sm text-gray-600">
                             <p><span class="font-semibold text-gray-800">Director. PhD:</span> JORGE ENRIQUE ARIAS CALDERON</p>
                             <p><span class="font-semibold text-gray-800">Grupo de investigación:</span> Derecho, Sociedad y Estado</p>
                             <p><span class="font-semibold text-gray-800">Línea de investigación:</span> Tendencias y reforma de la administración pública</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="mt-16 text-center">
                <button data-next="problema" class="next-btn nav-button bg-blue-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-blue-700">Siguiente Página &rarr;</button>
            </div>
        </section>

        <!-- Page: Planteamiento del Problema -->
        <section id="problema" class="page">
            <div class="text-center">
                <h2 class="text-3xl font-bold text-blue-800">Planteamiento del Problema</h2>
                <p class="mt-2 text-lg text-gray-600 max-w-3xl mx-auto">La normativa colombiana exige planes, pero no define el "cómo" implementarlos, creando una brecha crítica entre la ley y la capacidad real de respuesta.</p>
            </div>

            <div class="grid md:grid-cols-2 gap-8 items-start mt-10">
                <div class="section-card">
                    <h3 class="text-xl font-semibold text-blue-700 mb-3">La Brecha Normativa</h3>
                    <p class="text-gray-700">
                        El Decreto 2157 de 2017 exige a las empresas un Plan de Gestión del Riesgo, pero omite un modelo administrativo para su ejecución. Esto resulta en planes estáticos, ineficaces durante una crisis real, dejando a las organizaciones vulnerables.
                    </p>
                    <div class="mt-4 p-4 bg-blue-50 rounded-lg">
                        <p class="text-blue-900 font-semibold">Pregunta de Investigación:</p>
                        <p class="text-blue-800 italic">¿Cómo puede un modelo administrativo híbrido, que integra el SCI con la continuidad del negocio y la gestión de crisis, cerrar la brecha entre la planificación y la resiliencia organizacional efectiva en el Pacífico colombiano?</p>
                    </div>
                </div>
                <div class="section-card">
                     <h3 class="text-xl font-semibold text-blue-700 mb-3 text-center">Contexto: El Riesgo Compuesto</h3>
                     <div class="relative mt-6 flex flex-col items-center">
                        <div class="absolute top-8 left-1/2 w-px h-16 bg-blue-300 transform -translate-x-1/2"></div>
                        <div class="absolute top-8 left-1/4 w-px h-8 bg-blue-300 transform rotate-45"></div>
                        <div class="absolute top-8 right-1/4 w-px h-8 bg-blue-300 transform -rotate-45"></div>

                        <div class="grid grid-cols-3 gap-4 w-full text-center mb-10">
                            <div class="p-2 border border-blue-200 bg-blue-50 rounded-lg"><span class="text-2xl">🌊</span><h4 class="font-semibold text-blue-800 text-sm mt-1">Peligros Naturales</h4></div>
                            <div class="p-2 border border-red-200 bg-red-50 rounded-lg"><span class="text-2xl">🛡️</span><h4 class="font-semibold text-red-800 text-sm mt-1">Violencia y Conflicto</h4></div>
                            <div class="p-2 border border-yellow-200 bg-yellow-50 rounded-lg"><span class="text-2xl">📉</span><h4 class="font-semibold text-yellow-800 text-sm mt-1">Vulnerabilidades Sociales</h4></div>
                        </div>
                        <div class="p-4 bg-gray-800 text-white rounded-xl shadow-lg z-10"><h4 class="text-lg font-bold">RIESGO COMPUESTO</h4></div>
                    </div>
                     <p class="text-gray-600 mt-6 text-center">La región enfrenta una convergencia de amenazas que se magnifican mutuamente, exigiendo un enfoque de gestión integral.</p>
                </div>
            </div>
            
            <div class="mt-12 flex justify-between">
                <button data-prev="inicio" class="prev-btn nav-button bg-gray-200 text-gray-800 font-bold py-2 px-6 rounded-lg hover:bg-gray-300">&larr; Anterior</button>
                <button data-next="propuesta" class="next-btn nav-button bg-blue-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-700">Siguiente &rarr;</button>
            </div>
        </section>

        <!-- Page: Propuesta -->
        <section id="propuesta" class="page">
            <div class="text-center"><h2 class="text-3xl font-bold text-blue-800">Propuesta de Investigación</h2></div>

            <div class="mt-10 grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="section-card">
                    <h3 class="text-xl font-semibold text-blue-900 mb-4">Objetivos y Metodología</h3>
                    <div class="space-y-4">
                        <div>
                            <h4 class="font-bold text-blue-800">Objetivo General</h4>
                            <p class="mt-1 text-gray-700">Desarrollar y validar un Modelo Administrativo Híbrido de Resiliencia Organizacional (MAHRO) para empresas que operan en el entorno de riesgo compuesto de la región Pacífica colombiana.</p>
                        </div>
                        <div>
                            <h4 class="font-bold text-blue-800">Objetivos Específicos</h4>
                            <ul class="mt-1 text-gray-700 list-disc list-inside space-y-1">
                                <li>Diagnosticar las prácticas y protocolos actuales de gestión de crisis y continuidad de negocio en empresas de sectores clave de la región.</li>
                                <li>Diseñar los componentes, procesos y flujos de información del MAHRO, detallando la interacción entre sus tres niveles.</li>
                                <li>Validar la aplicabilidad, pertinencia y robustez del modelo a través de paneles de expertos y ejercicios de simulación de escritorio.</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-bold text-blue-800">Metodología</h4>
                            <p class="mt-1 text-gray-700">Se empleará un diseño de investigación cualitativo, basado en un estudio de caso múltiple para analizar en profundidad las realidades operativas de diferentes industrias, garantizando que el modelo resultante sea robusto y adaptable.</p>
                        </div>
                    </div>
                </div>

                <div class="section-card">
                    <h3 class="text-xl font-semibold text-blue-900 mb-4">Justificación: Construyendo Resiliencia Económica</h3>
                    <p class="text-gray-700 mb-4">Este proyecto trasciende lo académico para contribuir al desarrollo económico sostenible de la región Pacífica. El MAHRO busca generar impactos tangibles:</p>
                    <ul class="space-y-4 text-gray-700">
                        <li class="flex items-start">
                            <div class="flex-shrink-0 h-6 w-6 rounded-full bg-green-100 text-green-700 flex items-center justify-center mr-4 mt-1"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 20.944a11.955 11.955 0 0118 0c0-3.232-.725-6.246-2.056-8.877a11.955 11.955 0 00-2.326-3.04z"></path></svg></div>
                            <div><span class="font-semibold">Estabilidad Económica:</span> Minimizar interrupciones y pérdidas post-crisis, protegiendo el empleo y el tejido empresarial regional.</div>
                        </li>
                        <li class="flex items-start">
                             <div class="flex-shrink-0 h-6 w-6 rounded-full bg-green-100 text-green-700 flex items-center justify-center mr-4 mt-1"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path></svg></div>
                            <div><span class="font-semibold">Atracción de Inversión:</span> Convertir a las empresas resilientes en destinos más seguros y atractivos para la inversión nacional y extranjera.</div>
                        </li>
                        <li class="flex items-start">
                            <div class="flex-shrink-0 h-6 w-6 rounded-full bg-green-100 text-green-700 flex items-center justify-center mr-4 mt-1"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.653-.124-1.282-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.653.124-1.282.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></div>
                            <div><span class="font-semibold">Fortalecimiento del Capital Humano:</span> Desarrollar nuevas competencias en gestión de crisis, elevando el nivel profesional en la región.</div>
                        </li>
                    </ul>
                </div>
                 <div class="section-card lg:col-span-2">
                    <h3 class="text-xl font-semibold text-blue-900 mb-4">Contribución al Conocimiento y Originalidad</h3>
                    <p class="text-gray-700">Esta investigación llena un vacío documentado en la literatura al crear un marco práctico y replicable que traduce la obligación legal del Decreto 2157 en una capacidad operativa real. Su originalidad radica en:</p>
                    <ul class="mt-4 space-y-2 text-gray-700 list-disc list-inside">
                        <li><b>Sintetizar formalmente</b> los dominios del SCI, BCM y CM en una única estructura de gobernanza corporativa.</li>
                        <li><b>Proporcionar una solución diseñada explícitamente</b> para el "riesgo compuesto", un aporte novedoso a la gestión de crisis en contextos de gobernanza débil.</li>
                    </ul>
                </div>
            </div>
            
            <div class="mt-12 flex justify-between">
                <button data-prev="problema" class="prev-btn nav-button bg-gray-200 text-gray-800 font-bold py-2 px-6 rounded-lg hover:bg-gray-300">&larr; Anterior</button>
                <button data-next="modelo" class="next-btn nav-button bg-blue-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-700">Siguiente &rarr;</button>
            </div>
        </section>

        <!-- Page: Modelo Híbrido -->
        <section id="modelo" class="page">
            <div class="text-center"><h2 class="text-3xl font-bold text-blue-800">El Modelo Administrativo Híbrido (MAHRO)</h2></div>
            
            <div class="mt-10 space-y-8">
                <div class="section-card">
                    <h3 class="text-xl font-semibold text-blue-900 mb-4">La Originalidad: Síntesis de Tres Marcos Teóricos</h3>
                    <p class="text-gray-600 mb-6">La innovación de esta tesis es el diseño de una arquitectura de gestión que combina la disciplina táctica del SCI, la resiliencia operativa del BCM y la visión estratégica del CM para superar sus limitaciones individuales.</p>
                    <div class="grid md:grid-cols-3 gap-6 text-sm">
                        <div class="p-4 bg-blue-50 rounded-lg border border-blue-200">
                            <h4 class="font-bold text-blue-800">Sistema de Comando de Incidentes (SCI)</h4>
                            <p class="mt-2 text-gray-700">Adopta su disciplina táctica y estructura estandarizada para la respuesta inmediata. <br><em class="text-red-600 font-semibold mt-2 block">Crítica: Su alcance es limitado a lo operacional y rígido para la gestión estratégica.</em></p>
                        </div>
                        <div class="p-4 bg-green-50 rounded-lg border border-green-200">
                            <h4 class="font-bold text-green-800">Gestión de la Continuidad del Negocio (BCM)</h4>
                            <p class="mt-2 text-gray-700">Incorpora su enfoque sistemático para recuperar procesos críticos. <br><em class="text-red-600 font-semibold mt-2 block">Crítica: Es 'introvertido' y asume un entorno estable, premisa que no se sostiene en el Pacífico.</em></p>
                        </div>
                        <div class="p-4 bg-yellow-50 rounded-lg border border-yellow-200">
                            <h4 class="font-bold text-yellow-800">Gestión de Crisis (CM)</h4>
                            <p class="mt-2 text-gray-700">Integra su visión estratégica para la toma de decisiones de alto nivel. <br><em class="text-red-600 font-semibold mt-2 block">Crítica: Es demasiado abstracto y carece de arquitectura administrativa para la ejecución.</em></p>
                        </div>
                    </div>
                </div>

                <div class="grid lg:grid-cols-2 gap-8">
                     <div class="section-card">
                        <h3 class="text-xl font-semibold text-blue-900 mb-4">Estructura de Tres Niveles</h3>
                        <p class="text-gray-700 mb-4">El MAHRO se estructura en tres niveles de gobernanza interconectados para resolver la desarticulación entre la respuesta táctica y la estrategia corporativa.</p>
                        <div class="space-y-3">
                            <div class="p-3 bg-gray-100 rounded-md"><b>Nivel Táctico:</b> Gestiona la emergencia física en el terreno.</div>
                            <div class="p-3 bg-gray-100 rounded-md"><b>Nivel Estratégico:</b> Gestiona la crisis existencial del negocio y su reputación.</div>
                            <div class="p-3 bg-gray-100 rounded-md"><b>Nivel de Coordinación:</b> Actúa como el sistema nervioso central, asegurando la sincronía entre los otros dos niveles.</div>
                        </div>
                    </div>
                    <div class="section-card">
                        <h3 class="text-xl font-semibold text-blue-700 mb-4 text-center">Nivel Táctico en Acción: El Organigrama Propuesto</h3>
                        <img src="https://raw.githubusercontent.com/instructorandradedcc/PROPUESTA-MAHRO/main/organigrama%20para%20emergencias%20en%20empresas.png" alt="Organigrama del Sistema de Comando de Incidentes" class="w-full h-auto rounded-lg shadow-md">
                    </div>
                </div>
            </div>

            <div class="mt-12 flex justify-between">
                <button data-prev="propuesta" class="prev-btn nav-button bg-gray-200 text-gray-800 font-bold py-2 px-6 rounded-lg hover:bg-gray-300">&larr; Anterior</button>
                <button data-next="analisis" class="next-btn nav-button bg-blue-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-700">Siguiente &rarr;</button>
            </div>
        </section>

        <!-- Page: Analisis de Roles -->
        <section id="analisis" class="page">
            <div class="text-center"><h2 class="text-3xl font-bold text-blue-800">Análisis Interactivo de Roles</h2></div>
            <div class="mt-10 grid lg:grid-cols-5 gap-8">
                <div class="lg:col-span-3 section-card">
                    <h3 class="text-xl font-semibold text-blue-900 mb-4">Tabla de Equivalencia de Cargos (SCI a Empresa)</h3>
                    <input type="text" id="analisisSearchInput" placeholder="Filtrar por área, cargo o función..." class="w-full p-3 border border-gray-300 rounded-lg mb-4 focus:ring-2 focus:ring-blue-500">
                    <div class="overflow-auto max-h-[450px]">
                        <table class="w-full text-sm text-left text-gray-500">
                            <thead class="text-xs text-gray-700 uppercase bg-gray-100 sticky top-0">
                                <tr>
                                    <th scope="col" class="px-4 py-3">Área SCI</th>
                                    <th scope="col" class="px-4 py-3">Cargo SCI</th>
                                    <th scope="col" class="px-4 py-3">Equivalente Empresa</th>
                                </tr>
                            </thead>
                            <tbody id="analisisRolesTable">
                                <!-- JS will populate this -->
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="lg:col-span-2 section-card">
                    <h3 class="text-xl font-semibold text-blue-900 mb-4">Visualización de Datos</h3>
                     <p class="text-gray-600 mb-6 text-sm">Genere una gráfica para visualizar la distribución de roles dentro de la estructura de respuesta propuesta.</p>
                     <button id="generateChartBtn" class="w-full nav-button bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 mb-6">Generar Gráfica de Distribución</button>
                    <div class="relative h-80">
                         <canvas id="rolesChart"></canvas>
                    </div>
                </div>
            </div>
            <div class="mt-12 flex justify-between">
                <button data-prev="modelo" class="prev-btn nav-button bg-gray-200 text-gray-800 font-bold py-2 px-6 rounded-lg hover:bg-gray-300">&larr; Anterior</button>
                <button data-next="tablero" class="next-btn nav-button bg-blue-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-700">Siguiente &rarr;</button>
            </div>
        </section>

        <!-- Page: Tablero Táctico -->
        <section id="tablero" class="page">
             <div class="text-center mb-10">
                <h2 class="text-3xl font-bold text-blue-800">Tablero Táctico Interactivo</h2>
                <p class="mt-2 text-lg text-gray-600 max-w-3xl mx-auto">Cargue un mapa, posicione recursos y dibuje su estrategia.</p>
            </div>

            <div class="grid lg:grid-cols-4 gap-6">
                <!-- Columna de Recursos y Herramientas -->
                <div class="lg:col-span-1 section-card flex flex-col">
                    <h3 class="text-lg font-semibold text-blue-900 mb-4">Biblioteca de Recursos</h3>
                    <div class="space-y-4" id="resource-library">
                        <div class="resource-item flex items-center bg-gray-100 p-2 rounded-lg border" draggable="true" data-type="PC" data-label="★">
                            <span class="text-2xl mr-3">★</span> <span class="font-semibold">Puesto de Comando</span>
                        </div>
                         <div class="resource-item flex items-center bg-gray-100 p-2 rounded-lg border" draggable="true" data-type="Base" data-label="⚑">
                            <span class="text-2xl mr-3">⚑</span> <span class="font-semibold">Base</span>
                        </div>
                        <div class="resource-item flex items-center bg-gray-100 p-2 rounded-lg border" draggable="true" data-type="Ambulancia" data-label="🚑">
                            <span class="text-2xl mr-3">🚑</span> <span class="font-semibold">Ambulancia</span>
                        </div>
                        <div class="resource-item flex items-center bg-gray-100 p-2 rounded-lg border" draggable="true" data-type="Bomberos" data-label="🚒">
                            <span class="text-2xl mr-3">🚒</span> <span class="font-semibold">Bomberos</span>
                        </div>
                         <div class="resource-item flex items-center bg-gray-100 p-2 rounded-lg border" draggable="true" data-type="Logistica" data-label="🚚">
                            <span class="text-2xl mr-3">🚚</span> <span class="font-semibold">Logística</span>
                        </div>
                        <div class="resource-item flex items-center bg-gray-100 p-2 rounded-lg border" draggable="true" data-type="Personal" data-label="👩‍🚒">
                            <span class="text-2xl mr-3">👩‍🚒</span> <span class="font-semibold">Personal</span>
                        </div>
                         <div class="resource-item flex items-center bg-gray-100 p-2 rounded-lg border" draggable="true" data-type="PuntoEncuentro" data-label="📍">
                            <span class="text-2xl mr-3">📍</span> <span class="font-semibold">Punto de Encuentro</span>
                        </div>
                    </div>

                    <hr class="my-6">

                    <h3 class="text-lg font-semibold text-blue-900 mb-4">Herramientas de Dibujo</h3>
                    <div class="space-y-4">
                        <div class="flex items-center justify-between">
                            <label for="color-picker" class="font-semibold">Color:</label>
                            <input type="color" id="color-picker" value="#ff0000" class="w-12 h-8 p-0 border-0 rounded cursor-pointer">
                        </div>
                         <div class="flex items-center justify-between">
                            <label for="brush-size" class="font-semibold">Grosor:</label>
                            <input type="range" id="brush-size" min="1" max="50" value="5" class="w-2/3">
                        </div>
                        <div class="grid grid-cols-2 gap-2">
                            <button id="pen-tool" class="tool-btn active-tool p-2 rounded-lg">Lápiz</button>
                            <button id="eraser-tool" class="tool-btn p-2 rounded-lg">Borrador</button>
                        </div>
                    </div>

                    <div class="mt-auto pt-6">
                        <input type="file" id="map-upload-input" class="hidden" accept="image/*">
                        <button id="map-upload-btn" class="w-full mb-2 nav-button bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700">Cargar Mapa</button>
                        <button id="clear-drawings" class="w-full mb-2 nav-button bg-yellow-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-yellow-600">Borrar Dibujos</button>
                        <button id="clear-board" class="w-full nav-button bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700">Limpiar Todo</button>
                    </div>
                </div>

                <!-- Tablero y Formulario -->
                <div class="lg:col-span-3">
                    <div class="section-card mb-6">
                        <h3 class="text-lg font-semibold text-blue-900 mb-4">Formulario Táctico (Adaptado de SCI 201)</h3>
                        <div class="grid grid-cols-2 gap-4 text-sm">
                            <div><label class="font-semibold">1. Incidente:</label><input type="text" value="Simulacro Incendio Bodega Central" class="w-full mt-1 p-1 border rounded"></div>
                            <div><label class="font-semibold">2. Periodo Operacional:</label><input type="text" value="16/10/2025 22:00 a 17/10/2025 06:00" class="w-full mt-1 p-1 border rounded"></div>
                            <div class="col-span-2"><label class="font-semibold">3. Objetivos:</label><textarea class="w-full mt-1 p-1 border rounded" rows="3">1. Establecer perímetro de seguridad y controlar acceso.
2. Extinguir incendio y prevenir propagación.
3. Realizar búsqueda y rescate de posibles víctimas.
4. Evaluar daños estructurales y a inventario.</textarea></div>
                        </div>
                    </div>
                    <!-- Canvas container -->
                    <div id="canvas-container" class="relative w-full h-[550px] bg-gray-200 rounded-lg shadow-inner overflow-hidden border">
                        <canvas id="map-canvas" class="absolute top-0 left-0"></canvas>
                        <canvas id="grid-canvas" class="absolute top-0 left-0"></canvas>
                        <canvas id="objects-canvas" class="absolute top-0 left-0"></canvas>
                        <canvas id="drawing-canvas" class="absolute top-0 left-0 cursor-crosshair"></canvas>
                        <div id="upload-prompt" class="absolute top-0 left-0 w-full h-full flex flex-col items-center justify-center bg-gray-200/80 text-gray-600 p-4 text-center pointer-events-none">
                            <svg class="w-16 h-16 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                            <h3 class="text-xl font-semibold">Cargue una imagen de mapa</h3>
                            <p>Use el botón "Cargar Mapa", pegue una imagen (Ctrl+V) o arrastre y suelte un archivo aquí.</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mt-12 flex justify-between">
                <button data-prev="analisis" class="prev-btn nav-button bg-gray-200 text-gray-800 font-bold py-2 px-6 rounded-lg hover:bg-gray-300">&larr; Anterior</button>
                <button data-next="marco" class="next-btn nav-button bg-blue-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-700">Siguiente &rarr;</button>
            </div>
        </section>


        <!-- Page: Marco Teórico -->
        <section id="marco" class="page">
            <div class="text-center">
                <h2 class="text-3xl font-bold text-blue-800">Marco Teórico y Referentes</h2>
                <p class="mt-2 text-lg text-gray-600 max-w-3xl mx-auto">La propuesta se fundamenta en marcos normativos y teóricos robustos y reconocidos a nivel internacional.</p>
            </div>
            <div class="mt-10 grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="section-card"><h3 class="font-semibold text-blue-900">Sistema de Comando de Incidentes (SCI)</h3><p class="mt-2 text-gray-600">Estándar de gestión de emergencias con una estructura organizacional flexible y escalable.</p></div>
                <div class="section-card"><h3 class="font-semibold text-blue-900">Norma ISO 22301</h3><p class="mt-2 text-gray-600">Marco internacional para la continuidad del negocio, enfocado en protegerse y recuperarse de incidentes.</p></div>
                <div class="section-card"><h3 class="font-semibold text-blue-900">Decreto 2157 de 2017 (Colombia)</h3><p class="mt-2 text-gray-600">Directriz legal que obliga a entidades a formular un Plan de Gestión del Riesgo de Desastres.</p></div>
                <div class="section-card"><h3 class="font-semibold text-blue-900">Modelos de Gestión de Crisis</h3><p class="mt-2 text-gray-600">Marcos conceptuales que describen el ciclo de vida de una crisis para estructurar la preparación y el aprendizaje.</p></div>
                <div class="section-card"><h3 class="font-semibold text-blue-900">Resiliencia Organizacional</h3><p class="mt-2 text-gray-600">Capacidad dinámica de anticipación, afrontamiento y adaptación, vista como una ventaja competitiva.</p></div>
                <div class="section-card"><h3 class="font-semibold text-blue-900">Estudios sobre Riesgo Compuesto</h3><p class="mt-2 text-gray-600">Análisis sobre la interacción de múltiples amenazas que magnifican el impacto y sus consecuencias.</p></div>
            </div>
             <div class="mt-12 flex justify-between">
                <button data-prev="tablero" class="prev-btn nav-button bg-gray-200 text-gray-800 font-bold py-2 px-6 rounded-lg hover:bg-gray-300">&larr; Anterior</button>
                <button data-next="bibliografia" class="next-btn nav-button bg-blue-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-700">Siguiente &rarr;</button>
            </div>
        </section>

        <!-- Page: Bibliografía -->
        <section id="bibliografia" class="page">
            <div class="text-center">
                 <h2 class="text-3xl font-bold text-blue-800">Bibliografía Sugerida</h2>
                 <p class="mt-2 text-lg text-gray-600 max-w-3xl mx-auto">Una selección de fuentes académicas y técnicas relevantes para la investigación.</p>
            </div>
            <div class="mt-10 section-card">
                <ul class="space-y-3 text-sm text-gray-700">
                    <li><span class="font-semibold">Bigley, G. A., & Roberts, K. H. (2001).</span> The incident command system... <span class="italic">Academy of Management Journal, 44</span>(6).</li>
                    <li><span class="font-semibold">Coombs, W. T. (2019).</span> <span class="italic">Ongoing crisis communication...</span> (5th ed.). Sage.</li>
                    <li><span class="font-semibold">FEMA. (2017).</span> <span class="italic">National Incident Management System (NIMS)</span>.</li>
                    <li><span class="font-semibold">International Organization for Standardization. (2019).</span> <span class="italic">ISO 22301:2019...</span></li>
                    <li><span class="font-semibold">Ministerio de Ambiente. (2017).</span> Decreto 2157 de 2017.</li>
                    <li><span class="font-semibold">Mitroff, I. I., & Anagnos, G. (2001).</span> <span class="italic">Managing crises before they happen...</span> AMACOM.</li>
                    <li><span class="font-semibold">UNGRD. (2018).</span> <span class="italic">Guía para la elaboración de planes de gestión del riesgo...</span></li>
                    <li><span class="font-semibold">Van Der Vegt, G. S., et al. (2015).</span> Managing risk and resilience. <span class="italic">Academy of Management Journal, 58</span>(4).</li>
                </ul>
            </div>
             <div class="mt-12 flex justify-between">
                <button data-prev="marco" class="prev-btn nav-button bg-gray-200 text-gray-800 font-bold py-2 px-6 rounded-lg hover:bg-gray-300">&larr; Anterior</button>
                <button data-next="inicio" class="next-btn nav-button bg-blue-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-700">Volver al Inicio &circlearrowleft;</button>
            </div>
        </section>

    </main>

    <footer class="bg-gray-800 text-white mt-12">
        <div class="container mx-auto px-6 py-8 text-center">
            <p>&copy; 2025 Olmer Geovanny Andrade Cardenas. Propuesta de Investigación Doctoral.</p>
            <p class="text-sm text-gray-400 mt-2">Universidad del Valle - Doctorado en Administración</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const pages = document.querySelectorAll('.page');
            const navLinks = document.querySelectorAll('.nav-link');
            const mobileNav = document.getElementById('mobile-nav');
            const nextButtons = document.querySelectorAll('.next-btn');
            const prevButtons = document.querySelectorAll('.prev-btn');
            let rolesChartInstance = null;
            
            // --- START: Tactical Board Logic (New Version) ---
            const resourceLibrary = document.getElementById('resource-library');
            const canvasContainer = document.getElementById('canvas-container');
            const uploadPrompt = document.getElementById('upload-prompt');
            
            // Canvas layers
            const mapCanvas = document.getElementById('map-canvas');
            const gridCanvas = document.getElementById('grid-canvas');
            const objectsCanvas = document.getElementById('objects-canvas');
            const drawingCanvas = document.getElementById('drawing-canvas');
            
            // Drawing tools
            const colorPicker = document.getElementById('color-picker');
            const brushSize = document.getElementById('brush-size');
            const penTool = document.getElementById('pen-tool');
            const eraserTool = document.getElementById('eraser-tool');
            
            // Action Buttons
            const mapUploadBtn = document.getElementById('map-upload-btn');
            const mapUploadInput = document.getElementById('map-upload-input');
            const clearDrawingsBtn = document.getElementById('clear-drawings');
            const clearBoardBtn = document.getElementById('clear-board');
            
            if (canvasContainer) {
                const mapCtx = mapCanvas.getContext('2d');
                const gridCtx = gridCanvas.getContext('2d');
                const objectsCtx = objectsCanvas.getContext('2d');
                const drawingCtx = drawingCanvas.getContext('2d');
            
                let isDrawing = false;
                let isDragging = false;
                let draggedItem = null; // From resource library
                let selectedObject = null; // Placed object on canvas
                let offsetX, offsetY;
                let placedObjects = [];
            
                // --- Canvas and Tools State ---
                const toolState = {
                    currentTool: 'pen',
                    color: '#FF0000',
                    size: 5
                };
                
                // --- Initialization ---
                function initializeBoard() {
                    resizeCanvases();
                    drawGrid();
                    setupEventListeners();
                    window.addEventListener('resize', () => {
                        resizeCanvases();
                        redrawAll();
                    });
                }
            
                function resizeCanvases() {
                    const {
                        width,
                        height
                    } = canvasContainer.getBoundingClientRect();
                    [mapCanvas, gridCanvas, objectsCanvas, drawingCanvas].forEach(canvas => {
                        canvas.width = width;
                        canvas.height = height;
                    });
                }
            
                function redrawAll() {
                    // Redraw grid and objects after resize
                    drawGrid();
                    drawObjects();
                    // Note: Drawings on drawing-canvas are pixel data and will be cleared on resize.
                    // A more advanced implementation would store drawing paths and redraw them.
                }
            
                function drawGrid() {
                    const gridSize = 20;
                    gridCtx.clearRect(0, 0, gridCanvas.width, gridCanvas.height);
                    gridCtx.beginPath();
                    gridCtx.strokeStyle = 'rgba(209, 213, 219, 0.5)';
                    for (let x = 0; x <= gridCanvas.width; x += gridSize) {
                        gridCtx.moveTo(x, 0);
                        gridCtx.lineTo(x, gridCanvas.height);
                    }
                    for (let y = 0; y <= gridCanvas.height; y += gridSize) {
                        gridCtx.moveTo(0, y);
                        gridCtx.lineTo(gridCanvas.width, y);
                    }
                    gridCtx.stroke();
                }
                
                // --- Image/Map Handling ---
                function handleImage(file) {
                    if (file && file.type.startsWith('image/')) {
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            const img = new Image();
                            img.onload = () => {
                                mapCtx.clearRect(0, 0, mapCanvas.width, mapCanvas.height);
                                // Draw image scaled to fit container while maintaining aspect ratio
                                const hRatio = mapCanvas.width / img.width;
                                const vRatio = mapCanvas.height / img.height;
                                const ratio = Math.min(hRatio, vRatio);
                                const centerShift_x = (mapCanvas.width - img.width * ratio) / 2;
                                const centerShift_y = (mapCanvas.height - img.height * ratio) / 2;
                                mapCtx.drawImage(img, 0, 0, img.width, img.height, centerShift_x, centerShift_y, img.width * ratio, img.height * ratio);
                                uploadPrompt.style.display = 'none';
                            };
                            img.src = e.target.result;
                        };
                        reader.readAsDataURL(file);
                    }
                }
            
            
                // --- Resource & Object Handling ---
                function drawObjects() {
                    objectsCtx.clearRect(0, 0, objectsCanvas.width, objectsCanvas.height);
                    placedObjects.forEach(obj => {
                        objectsCtx.font = '24px sans-serif';
                        objectsCtx.textAlign = 'center';
                        objectsCtx.textBaseline = 'middle';
                        objectsCtx.fillText(obj.label, obj.x, obj.y);
                    });
                }
                
                function getObjectAtPosition(x, y) {
                    // Iterate backwards to select the top-most object
                    for (let i = placedObjects.length - 1; i >= 0; i--) {
                        const obj = placedObjects[i];
                        // Simple bounding box collision detection (30x30 pixels)
                        if (x > obj.x - 15 && x < obj.x + 15 && y > obj.y - 15 && y < obj.y + 15) {
                            return obj;
                        }
                    }
                    return null;
                }
            
            
                // --- Drawing Handling ---
                function startDrawing(e) {
                    const { offsetX, offsetY } = getCanvasCoords(e);
                    isDrawing = true;
                    drawingCtx.beginPath();
                    drawingCtx.moveTo(offsetX, offsetY);
                    updateBrush();
                }
            
                function draw(e) {
                    if (!isDrawing) return;
                    const { offsetX, offsetY } = getCanvasCoords(e);
                    drawingCtx.lineTo(offsetX, offsetY);
                    drawingCtx.stroke();
                }
                
                function stopDrawing() {
                    if (isDrawing) {
                        drawingCtx.closePath();
                        isDrawing = false;
                    }
                }
                
                function updateBrush() {
                    if(toolState.currentTool === 'pen'){
                         drawingCtx.globalCompositeOperation = 'source-over';
                         drawingCtx.strokeStyle = toolState.color;
                         drawingCtx.lineWidth = toolState.size;
                         drawingCtx.lineCap = 'round';
                         drawingCtx.lineJoin = 'round';
                    } else if (toolState.currentTool === 'eraser'){
                        drawingCtx.globalCompositeOperation = 'destination-out';
                        drawingCtx.lineWidth = toolState.size;
                    }
                }
                
                // --- Event Handlers ---
                function setupEventListeners() {
                    // Resource Library Drag & Drop
                    resourceLibrary.addEventListener('dragstart', (e) => {
                        if (e.target.classList.contains('resource-item')) {
                            draggedItem = {
                                type: e.target.dataset.type,
                                label: e.target.dataset.label
                            };
                        }
                    });
            
                    // Canvas drop from library or file system
                    canvasContainer.addEventListener('dragover', e => e.preventDefault());
                    canvasContainer.addEventListener('drop', (e) => {
                        e.preventDefault();
                        if (draggedItem) {
                            const { offsetX, offsetY } = getCanvasCoords(e);
                            placedObjects.push({
                                id: Date.now(),
                                ...draggedItem,
                                x: offsetX,
                                y: offsetY
                            });
                            drawObjects();
                            draggedItem = null;
                        }
                        if (e.dataTransfer.files.length > 0) {
                             handleImage(e.dataTransfer.files[0]);
                        }
                    });
            
                    // Mouse events for drawing AND moving objects
                    drawingCanvas.addEventListener('mousedown', handleMouseDown);
                    drawingCanvas.addEventListener('mousemove', handleMouseMove);
                    drawingCanvas.addEventListener('mouseup', handleMouseUp);
                    drawingCanvas.addEventListener('mouseout', handleMouseUp); // Stop if mouse leaves canvas
                    
                    // Touch events
                    drawingCanvas.addEventListener('touchstart', handleMouseDown);
                    drawingCanvas.addEventListener('touchmove', handleMouseMove);
                    drawingCanvas.addEventListener('touchend', handleMouseUp);
            
                    // Map/Image loading
                    mapUploadBtn.addEventListener('click', () => mapUploadInput.click());
                    mapUploadInput.addEventListener('change', (e) => handleImage(e.target.files[0]));
                    document.addEventListener('paste', (e) => {
                         const items = e.clipboardData.items;
                         for (const item of items) {
                             if (item.type.indexOf('image') !== -1) {
                                 handleImage(item.getAsFile());
                                 break;
                             }
                         }
                    });
                    
                    // Tool selection
                    colorPicker.addEventListener('input', (e) => toolState.color = e.target.value);
                    brushSize.addEventListener('input', (e) => toolState.size = e.target.value);
                    penTool.addEventListener('click', () => {
                        toolState.currentTool = 'pen';
                        penTool.classList.add('active-tool');
                        eraserTool.classList.remove('active-tool');
                        drawingCanvas.style.cursor = 'crosshair';
                    });
                    eraserTool.addEventListener('click', () => {
                        toolState.currentTool = 'eraser';
                        eraserTool.classList.add('active-tool');
                        penTool.classList.remove('active-tool');
                        drawingCanvas.style.cursor = `url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' style='color:black'><path fill='white' stroke='currentColor' stroke-width='2' d='M6 6L18 18M18 6L6 18' /></svg>") 12 12, auto`;
                    });
                    
                    // Clear buttons
                    clearDrawingsBtn.addEventListener('click', () => {
                         drawingCtx.clearRect(0, 0, drawingCanvas.width, drawingCanvas.height);
                    });
                    
                    clearBoardBtn.addEventListener('click', () => {
                        mapCtx.clearRect(0, 0, mapCanvas.width, mapCanvas.height);
                        drawingCtx.clearRect(0, 0, drawingCanvas.width, drawingCanvas.height);
                        placedObjects = [];
                        drawObjects();
                        uploadPrompt.style.display = 'flex';
                    });
                }
            
                function handleMouseDown(e) {
                    e.preventDefault();
                    const { offsetX: mouseX, offsetY: mouseY } = getCanvasCoords(e);
                    selectedObject = getObjectAtPosition(mouseX, mouseY);
            
                    if (selectedObject) {
                        isDragging = true;
                        offsetX = mouseX - selectedObject.x;
                        offsetY = mouseY - selectedObject.y;
                    } else {
                        startDrawing(e);
                    }
                }
                
                function handleMouseMove(e) {
                    e.preventDefault();
                    if (isDragging && selectedObject) {
                        const { offsetX: mouseX, offsetY: mouseY } = getCanvasCoords(e);
                        selectedObject.x = mouseX - offsetX;
                        selectedObject.y = mouseY - offsetY;
                        drawObjects();
                    } else if (isDrawing) {
                        draw(e);
                    }
                }
            
                function handleMouseUp(e) {
                    e.preventDefault();
                    if(isDragging) {
                         isDragging = false;
                         selectedObject = null;
                    }
                    if(isDrawing){
                        stopDrawing();
                    }
                }
            
                // Utility to get correct canvas coordinates for mouse and touch
                function getCanvasCoords(e) {
                    const rect = drawingCanvas.getBoundingClientRect();
                    const touch = e.touches ? e.touches[0] : null;
                    const clientX = touch ? touch.clientX : e.clientX;
                    const clientY = touch ? touch.clientY : e.clientY;
                    return {
                        offsetX: clientX - rect.left,
                        offsetY: clientY - rect.top
                    };
                }
            
                // --- Start everything ---
                initializeBoard();
            }
            // --- END: Tactical Board Logic ---


            // Roles Analysis Logic
            const rolesData = [
                { area: "Mando", cargoSci: "Comandante del Incidente", equivalente: "Coordinador de la Brigada / Director Operativo" },
                { area: "Staff de Mando", cargoSci: "Oficial de Seguridad", equivalente: "Gerente de Riesgos y Seguridad" },
                { area: "Staff de Mando", cargoSci: "Oficial de Informaciones Públicas", equivalente: "Gerente de Comunicaciones" },
                { area: "Staff de Mando", cargoSci: "Oficial de Enlace", equivalente: "Coordinador de Alianzas o Relaciones Externas" },
                { area: "Sección Planificación", cargoSci: "Jefe de Planificación", equivalente: "Jefe de Estrategia y Planificación" },
                { area: "Sección Planificación", cargoSci: "Asistentes de Planificación", equivalente: "Analistas de Estrategia / Planificación" },
                { area: "Sección Operaciones", cargoSci: "Jefe de Operaciones", equivalente: "Gerente de Operaciones" },
                { area: "Sección Operaciones", cargoSci: "Equipos por Divisiones/Grupos", equivalente: "Supervisores de Proyectos / Líderes de Área" },
                { area: "Sección Logística", cargoSci: "Jefe de Logística", equivalente: "Gerente de Logística y Soporte" },
                { area: "Sección Logística", cargoSci: "Unidad de Servicios", equivalente: "Depto. de Soporte Técnico/Administrativo" },
                { area: "Sección Administración y Finanzas", cargoSci: "Jefe de Admin. y Finanzas", equivalente: "Gerente de Administración y Finanzas" },
                { area: "Sección Administración y Finanzas", cargoSci: "Unidad de Registro y Compensación", equivalente: "Departamento de Nómina y RRHH" }
            ];

            const tableBody = document.getElementById('analisisRolesTable');
            const searchInput = document.getElementById('analisisSearchInput');

            function populateTable(data) {
                if (!tableBody) return;
                tableBody.innerHTML = '';
                if (data.length === 0) {
                    tableBody.innerHTML = `<tr><td colspan="3" class="text-center px-4 py-4">No se encontraron resultados.</td></tr>`;
                    return;
                }
                data.forEach(role => {
                    const row = `
                        <tr class="bg-white border-b hover:bg-gray-50">
                            <td class="px-4 py-3 font-medium text-gray-900">${role.area}</td>
                            <td class="px-4 py-3">${role.cargoSci}</td>
                            <td class="px-4 py-3">${role.equivalente}</td>
                        </tr>
                    `;
                    tableBody.innerHTML += row;
                });
            }
            
            if (searchInput) {
                searchInput.addEventListener('keyup', () => {
                    const searchTerm = searchInput.value.toLowerCase();
                    const filteredData = rolesData.filter(role =>
                        role.area.toLowerCase().includes(searchTerm) ||
                        role.cargoSci.toLowerCase().includes(searchTerm) ||
                        role.equivalente.toLowerCase().includes(searchTerm)
                    );
                    populateTable(filteredData);
                });
            }
            populateTable(rolesData);

            function generateChart() {
                const ctx = document.getElementById('rolesChart').getContext('2d');
                const areaCounts = rolesData.reduce((acc, role) => {
                    acc[role.area] = (acc[role.area] || 0) + 1;
                    return acc;
                }, {});

                const labels = Object.keys(areaCounts);
                const data = Object.values(areaCounts);
                
                if (rolesChartInstance) {
                    rolesChartInstance.destroy();
                }

                rolesChartInstance = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Número de Roles por Área',
                            data: data,
                            backgroundColor: ['rgba(54, 162, 235, 0.6)','rgba(255, 99, 132, 0.6)','rgba(75, 192, 192, 0.6)','rgba(255, 206, 86, 0.6)','rgba(153, 102, 255, 0.6)', 'rgba(255, 159, 64, 0.6)'],
                            borderColor: ['rgba(54, 162, 235, 1)','rgba(255, 99, 132, 1)','rgba(75, 192, 192, 1)','rgba(255, 206, 86, 1)','rgba(153, 102, 255, 1)', 'rgba(255, 159, 64, 1)'],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: { y: { beginAtZero: true, ticks: { stepSize: 1 } } },
                        plugins: { legend: { display: false }, title: { display: true, text: 'Distribución de Roles por Área Funcional' } }
                    }
                });
            }

            const generateChartBtn = document.getElementById('generateChartBtn');
            if(generateChartBtn) {
                generateChartBtn.addEventListener('click', generateChart);
            }
            
            // General Page Navigation
            function showPage(pageId) {
                pages.forEach(page => page.classList.toggle('active', page.id === pageId));
                navLinks.forEach(link => link.classList.toggle('active', link.dataset.page === pageId));
                if (mobileNav) mobileNav.value = pageId;
                window.scrollTo(0, 0);

                // Initialize tactical board only when its page is shown
                if (pageId === 'tablero' && canvasContainer && !canvasContainer.classList.contains('initialized')) {
                    initializeBoard();
                    canvasContainer.classList.add('initialized');
                }
            }

            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    showPage(link.dataset.page);
                });
            });

            if (mobileNav) {
                mobileNav.addEventListener('change', () => {
                    showPage(mobileNav.value);
                });
            }

            nextButtons.forEach(button => {
                button.addEventListener('click', () => {
                    showPage(button.dataset.next);
                });
            });

            prevButtons.forEach(button => {
                button.addEventListener('click', () => {
                    showPage(button.dataset.prev);
                });
            });
        });
    </script>
</body>
</html>



